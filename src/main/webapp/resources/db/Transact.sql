CREATE TABLE TRANSACT(
	ID VARCHAR2(50),
	EMPNO VARCHAR2(20),	
	PROCODE VARCHAR2(20),
	PROAMOUNT VARCHAR2(10),	
	TEAM  VARCHAR2(20),
	CATEGORY VARCHAR2(20),
	PRICE VARCHAR2(50),
	ASSETS VARCHAR2(50),
	TRANSDATE DATE,
	DELETED NUMBER	
);

CREATE TABLE OREQUEST(
	ONUM NUMBER,
	EMPNO VARCHAR2(20),
	PROCODE VARCHAR2(20),
	OAMOUNT NUMBER,
	OCOMMENT VARCHAR2(500),
	REGDATE DATE,
	CHECKS NUMBER,
	DELETED NUMBER	
);

INSERT INTO TRANSACT (ID, EMPNO, PROCODE, PROAMOUNT, TEAM, CATEGORY, PRICE, ASSETS, TRANSDATE , DELETED)
VALUES(TO_CHAR(TRANSSEQ.NEXTVAL), #{empno}, #{procode}, #{oamount}, (SELECT TEAM FROM SMEMBER WHERE EMPNO=#{empno}), '판매', 
(SELECT SELLPRICE FROM PRODUCT WHERE PROCODE=#{procode}), '0',  SYSDATE, 0);

INSERT INTO TRANSACT (ID, EMPNO, PROCODE, PROAMOUNT, TEAM, CATEGORY, PRICE, ASSETS, TRANSDATE , DELETED)
VALUES(TO_CHAR(TRANSSEQ.NEXTVAL), '300301', '6121', '110', (select team from smember where empno='300301'), '판매', 
(select sellprice from product where procode='6121'), '0',  SYSDATE, 0);

SELECT * FROM TRANSACT

select * from OREQUEST
select * from TRANSACT
UPDATE OREQUEST SET CHECKS = 1


CREATE SEQUENCE TRANSSEQ
START WITH 1
NOCACHE;

ALTER TABLE TRANSACT ADD(TEAM VARCHAR(20) )

SELECT * FROM TRANSACT;
DROP TABLE TRANSACT;
DROP SEQUENCE TRANSSEQ

SELECT * FROM TRANSACT WHERE CATEGORY='구매' 	AND TEAM = '영업1팀' AND  
TO_CHAR(TRANSDATE, 'YYYY-MM-DD') BETWEEN  '2016-10-02' AND  '2016-11-20' 



INSERT INTO TRANSACT (ID, EMPNO, PROCODE, PROAMOUNT, TEAM, CATEGORY, PRICE, ASSETS, TRANSDATE , DELETED) 
VALUES(TO_CHAR(TRANSSEQ.NEXTVAL), '300302', '1004', '100', '영업1팀', '구매', '100000', '6464646',  DATE '2016-11-01', 0);

INSERT INTO TRANSACT (ID, EMPNO, PROCODE, PROAMOUNT, TEAM, CATEGORY, PRICE, ASSETS, TRANSDATE , DELETED) 
VALUES(TO_CHAR(TRANSSEQ.NEXTVAL), '300303', '1004', '100', '영업2팀', '구매', '100000', '6464646',  DATE '2016-11-08', 0);

INSERT INTO TRANSACT (ID, EMPNO, PROCODE, PROAMOUNT, TEAM, CATEGORY, PRICE, ASSETS, TRANSDATE , DELETED) 
VALUES(TO_CHAR(TRANSSEQ.NEXTVAL), '300304', '1004', '100', '영업2팀', '판매', '65651', '6464646',  DATE '2016-11-12', 0);

INSERT INTO TRANSACT (ID, EMPNO, PROCODE, PROAMOUNT, TEAM, CATEGORY, PRICE, ASSETS, TRANSDATE , DELETED) 
VALUES(TO_CHAR(TRANSSEQ.NEXTVAL), '300302', '1004', '100', '영업1팀', '구매', '100000', '6464646',  DATE '2016-11-14', 0);

INSERT INTO TRANSACT (ID, EMPNO, PROCODE, PROAMOUNT, TEAM, CATEGORY, PRICE, ASSETS, TRANSDATE , DELETED) 
VALUES(TO_CHAR(TRANSSEQ.NEXTVAL), '300301', '1004', '100', '영업2팀', '구매', '115555', '6464646',  DATE '2016-11-10', 0);

INSERT INTO TRANSACT (ID, EMPNO, PROCODE, PROAMOUNT, TEAM, CATEGORY, PRICE, ASSETS, TRANSDATE , DELETED) 
VALUES(TO_CHAR(TRANSSEQ.NEXTVAL), '300313', '1004', '100', '영업1팀', '판매', '100000', '6464646',  DATE '2016-10-14', 0);

INSERT INTO TRANSACT (ID, EMPNO, PROCODE, PROAMOUNT, TEAM, CATEGORY, PRICE, ASSETS, TRANSDATE , DELETED) 
VALUES(TO_CHAR(TRANSSEQ.NEXTVAL), '300315', '1004', '100', '영업1팀', '구매', '100000', '6464646',  DATE '2016-11-05', 0);